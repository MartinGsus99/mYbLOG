---
title: 前端监控SDK
date: 2023-03-27 18:51:45
categories: 
    - 前端
tags: 
    - 面试笔记
    - 笔记
mp3: 
cover: img/bg13.jpg
---


# 前端监控SDK

## 一、为什么要聊前端监控？

### 1.经典面试题

> Q：在浏览器里，从输入url到页面展示，这中间发生了什么？

##### 浏览网页出现的问题

- 打开缓慢（使用的xp+ie，建议升级系统）
- 卡顿（电脑配置太差，建议升级硬件）
- 图片裂开（用户网络太差，建议升级宽带）
- 白屏（在我电脑上没问题啊！！）

> 前端监控通过对页面数据的采集和上报，来帮助开发者更快速的对质量差的页面进行分析与归因；

##### 监控页面质量的意义

- 减少等待时间，提升流量和注册量
- 减少加载时间，转化率提升、跳出率降低

### 2.前端监控内容

- 性能指标
- 异常事件

![](https://s3.bmp.ovh/imgs/2023/02/07/b036f881035999c6.jpg)

## 二、常用性能指标

### 1.以用户为中心的性能指标

![](https://s3.bmp.ovh/imgs/2023/02/07/6bc30cec8a9bb5f3.jpg)

- FP：首次渲染的时间点，FP时间点之前，用户看到的都是空白的白屏；

- FCP：首次有内容渲染的时间点；
- FMP：首次绘制有意义内容的时间点；
- TTI：测量页面从开始加载到主要子资源完成渲染并能够快速可靠的响应用户输入所需的时间。TTI越小用户能越早交互；
- SI（Speed Index）：衡量页面可视区域加载速度；

![](https://s3.bmp.ovh/imgs/2023/02/07/5b5921ad1952f52a.jpg)

> A和B的首次内容出现和加载时间完全一样，但是A的用户体验更好；

- FID（First Input Delay）：测量从用户第一次与页面交互（点击、按钮）知道浏览器对交互做出响应实际能够处理事件时所经过的时间；

- LCP（Largest Contentful Paint）：最大的内容在可视区域内变得可见的时间点；

优点：1.容易理解 2.给出结果与FMP结果相似 3.容易计算和上报

- TBT（Total Blocking TIme）：量化主线程在空闲之前的繁忙程度，有助于理解在加载是啊金，页面无法响应用户输入的时间有多久；

![](https://s3.bmp.ovh/imgs/2023/02/07/d6ec168427ced5ef.jpg)

长任务：如果一个任务在主线程上运行超过50ms，就是长任务

- CLS（Cumulative Layout Shift）：量化了 在页面加载期间，视口内元素的移动程度；-

点击按钮的时候，页面突然出现了内容或者文本下移等类似的问题，对用户操作产生影响；

## 三、前端常见异常

### 1.静态资源错误

> 所需要的html、css、js以及图片等其他多媒体文件；
>
> 静态资源错误：在拉取和加载静态资源的过程中发生了预期之外的错误，如网络异常等；

### 2.请求异常

- 100-199（信息响应）
- 200-299（成功响应）
- 300-399（重定向）
- 400-499（客户端错误）
- 500-599（服务端错误）

请求异常=请求响应状态码>=400;

对于异步请求拉取的静态资源错误也可以选择归纳为请求异常；

状态码为0：

![](https://s3.bmp.ovh/imgs/2023/02/07/f4b5b3dc5ffd4542.jpg)

### 3. js错误

js错误会严重影响页面的正常渲染与交互，是前端监控的重点；

### 4.白屏异常

通常可以通过判断DOM树的结构来粗略判断白屏是否发生；

- js错误导致关键资源渲染失败
- 请求异常
- 长时间的js线程繁忙阻塞渲染任务

## 四、性能指标监控

### 1.Perfomance

Web Api接口；

Performance Observer；





















