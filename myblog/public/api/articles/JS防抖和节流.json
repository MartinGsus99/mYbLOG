{"title":"防抖与节流","uid":"cd6a12c0c07e3b04d0fd2533bf4aa0fa","slug":"JS防抖和节流","date":"2023-07-06T05:51:45.000Z","updated":"2023-07-07T02:13:22.364Z","comments":true,"path":"api/articles/JS防抖和节流.json","keywords":"Love And Freedom","cover":"img/bg2.jpg","content":"<h1 id=\"防抖与节流\"><a href=\"#防抖与节流\" class=\"headerlink\" title=\"防抖与节流\"></a>防抖与节流</h1><h2 id=\"一、防抖\"><a href=\"#一、防抖\" class=\"headerlink\" title=\"一、防抖\"></a>一、防抖</h2><h3 id=\"1-应用场景\"><a href=\"#1-应用场景\" class=\"headerlink\" title=\"1.应用场景\"></a>1.应用场景</h3><ul>\n<li>窗口 resize，滚动条 scroll，输入框 input</li>\n<li>持续发生，具有过程的事件</li>\n</ul>\n<h3 id=\"2-应用：利用闭包实现\"><a href=\"#2-应用：利用闭包实现\" class=\"headerlink\" title=\"2.应用：利用闭包实现\"></a>2.应用：利用闭包实现</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> inputEvent <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> content <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">inputChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  content<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> inputEvent<span class=\"token punctuation\">.</span>value\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//使用闭包形成防抖</span>\n<span class=\"token comment\">//闭包：函数里有一个内部函数，并返回出去，还是用了外部函数的变量</span>\ninputEvent<span class=\"token punctuation\">.</span>oninput <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span>inputChange<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">//如果定时器不空，则清除之前的timer</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"二、节流\"><a href=\"#二、节流\" class=\"headerlink\" title=\"二、节流\"></a>二、节流</h2><h3 id=\"1-应用场景-1\"><a href=\"#1-应用场景-1\" class=\"headerlink\" title=\"1.应用场景\"></a>1.应用场景</h3><ul>\n<li>在规定的时间里执行一次操作，但是不一定只执行一次</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">alertAdv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'广告'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\nwindow<span class=\"token punctuation\">.</span>onscroll <span class=\"token operator\">=</span> <span class=\"token function\">ttrottle</span><span class=\"token punctuation\">(</span>alertAdv<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ttrottle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n        timer <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","feature":true,"text":"防抖与节流一、防抖1.应用场景 窗口 resize，滚动条 scroll，输入框 input 持续发生，具有过程的事件 2.应用：利用闭包实现let inputEvent = document.querySelector('input') let content = docume...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"JS","slug":"JS","count":2,"path":"api/categories/JS.json"}],"tags":[{"name":"JS","slug":"JS","count":5,"path":"api/tags/JS.json"},{"name":"JS技巧","slug":"JS技巧","count":1,"path":"api/tags/JS技巧.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81\"><span class=\"toc-text\">防抖与节流</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E9%98%B2%E6%8A%96\"><span class=\"toc-text\">一、防抖</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">1.应用场景</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%BA%94%E7%94%A8%EF%BC%9A%E5%88%A9%E7%94%A8%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0\"><span class=\"toc-text\">2.应用：利用闭包实现</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E8%8A%82%E6%B5%81\"><span class=\"toc-text\">二、节流</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1\"><span class=\"toc-text\">1.应用场景</span></a></li></ol></li></ol></li></ol>","author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"二叉搜索树集锦","uid":"ea7d19252d7361b5f280a3d0ee2aa6d5","slug":"二叉搜索树集锦","date":"2023-07-07T00:51:45.000Z","updated":"2023-07-07T02:56:13.474Z","comments":true,"path":"api/articles/二叉搜索树集锦.json","keywords":"Love And Freedom","cover":"img/bg16.jpg","text":"二叉搜索树集锦//基础框架 var Traverse = function (root) &#123; //something need to do Traverse(root.left) Traverse(root.right) &#125; //所有结点+1 var plus...","link":"","photos":[],"count_time":{"symbolsCount":"2.9k","symbolsTime":"3 mins."},"categories":[{"name":"算法","slug":"算法","count":3,"path":"api/categories/算法.json"}],"tags":[{"name":"算法","slug":"算法","count":1,"path":"api/tags/算法.json"},{"name":"二叉搜索树","slug":"二叉搜索树","count":1,"path":"api/tags/二叉搜索树.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"Nginx","uid":"af6a277a1f79cc7652a602f9f57ed64f","slug":"Nginx","date":"2023-07-06T00:51:45.000Z","updated":"2023-07-07T02:12:06.626Z","comments":true,"path":"api/articles/Nginx.json","keywords":"Love And Freedom","cover":"img/bg13.jpg","text":"Nginx一、简介 Web 服务器 解决 C10K 问题 最大 5w 个并发连接 二、基本使用1.基础#启动 nginx ps -ef | grep nginx #查看端口占用 lsof -i:80 #优雅停止 nginx -s quit #立即停止 nginx -s stop ...","link":"","photos":[],"count_time":{"symbolsCount":893,"symbolsTime":"1 mins."},"categories":[{"name":"Nginx","slug":"Nginx","count":1,"path":"api/categories/Nginx.json"}],"tags":[{"name":"Nginx","slug":"Nginx","count":1,"path":"api/tags/Nginx.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}