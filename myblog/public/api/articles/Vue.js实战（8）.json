{"title":"Vue.js实战（8）","uid":"9f8342f8223f4f2e54d6e52f7a65c033","slug":"Vue.js实战（8）","date":"2020-12-05T13:18:45.000Z","updated":"2021-01-12T02:36:08.000Z","comments":true,"path":"api/articles/Vue.js实战（8）.json","keywords":"Love And Freedom","cover":"img/vue_js_shizhan.jpg","content":"<p>Ch11 插件</p>\n<p>一、插件得创建和使用</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"> <span class=\"token comment\">//公开的方法install，参数1：VUe构造器，参数2：可选对象     </span>\nMyPlugin<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">install</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Vue<span class=\"token punctuation\">,</span>options</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">//全剧注册组件</span>\n            Vue<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span><span class=\"token string\">'component-name'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">//组件内容</span>\n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n            <span class=\"token comment\">//添加实例方法</span>\n            <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">$Notice</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">//逻辑。。</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token comment\">//添加全局方法或属性</span>\n            Vue<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">globalMethod</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">//逻辑</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token comment\">//添加全局混合</span>\n            Vue<span class=\"token punctuation\">.</span><span class=\"token function\">mixin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n                <span class=\"token function-variable function\">mounted</span><span class=\"token operator\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token comment\">//逻辑 </span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//Vue.use()来使用插件</span>\n        Vue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>MyPlugin<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>二、前端路由与Vue-router</p>\n<p>​        1.实现方式</p>\n<ul>\n<li><p>利用url得hash，即所谓的锚点（#）</p>\n</li>\n<li><p>HTML5得History模式：需要服务器支持</p>\n<p>2.vue-router基本用法</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//在webpack项目中安装vue-router</span>\nnpm install <span class=\"token operator\">--</span>save vue<span class=\"token operator\">-</span>router\n\n<span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span>\n<span class=\"token keyword\">import</span> Router <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-router'</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Router<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//index.js</span>\n<span class=\"token literal-property property\">routes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Movie\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">//一次性全部加载</span>\n      <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span>Login\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/test'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span>Test\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/index'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'../components/Index.vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>resolve<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">//懒加载（按需加载）mwebpack会把每一个路由打包为一个js文件，当请求到该页面时，才会去加载这个页面得js</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'../components/About.vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>resolve<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//包含了用户Id得路由，指向同一界面；</span>\n     <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/user/:id'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'../components/User.vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>resolve<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">]</span> \n\n\n<span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span><span class=\"token operator\">**</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>3.ES6小语法</p>\n<p>在ES6中，使用let和const代替var来声明变量，const声明常量不可修改；</p>\n<p>let和const得作用域是块（使用了异步路由后，编译出的每个js都叫做快（chunk)）；</p>\n<p>4.小细节</p>\n<p>在router.js中，设置mode为history才会开启HTML5得路由模式，通过’/‘设置路径，否则为’#‘</p>\n<p>5.跳转</p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;router-link to&#x3D;&quot;&#x2F;about&quot;&gt;About&lt;&#x2F;router-link&gt;\n\n    &#x2F;&#x2F;页面跳转方法2\n    &lt;button @click&#x3D;&quot;changeToMain&quot;&gt;Index&lt;&#x2F;button&gt;\n    \n     methods:&#123;\n    changeToMain()&#123;\n      &#x2F;&#x2F;不可以跳转到当前页面路由本身，会报出冗余错误\n      this.$router.push(&#39;&#x2F;passage&#39;);\n    &#125;\n  &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>tag:tag可以指定渲染成什么标签，比如tag=”li”,会渲染成li</p>\n</li>\n<li><p>replace：使用后不可以使用返回键回到上一个页面</p>\n</li>\n<li><p>go:在history记录中向前或者向后退多少步，参数为整数   this.$router.go(-1)或(2)</p>\n</li>\n</ul>\n<p>三、状态</p>\n<p>管理与Vuex</p>\n<p>​    1.状态管理与使用场景</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">npm install <span class=\"token operator\">--</span>save vuex<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>​    2.Vuex得使用</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//main.js</span>\n<span class=\"token keyword\">import</span> Vuex <span class=\"token keyword\">from</span> <span class=\"token string\">'Vuex'</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Vuex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>\n          <span class=\"token comment\">//定义一个数据</span>\n        \t<span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span><span class=\"token number\">0</span>\n      <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//在任何vue文件中都可以获取该数据</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n    &lt;div&gt;\n        &#x2F;&#x2F;获取数据\n          &#123;&#123; $store.state.count &#125;&#125;\n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n    name:&#39;Counter&#39;,\n    &#x2F;&#x2F;使用computed方法显示\n    computed:&#123;\n        count()&#123;\n            return this.$store.state.count;\n        &#125;\n    &#125;\n&#125;\n&lt;&#x2F;script&gt;\n\n&lt;style&gt;\n\n&lt;&#x2F;style&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>3.修改vuex的数据</p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">const store&#x3D;new Vuex.Store(&#123;\n      state:&#123;\n        count:0\n      &#125;,\n&#x2F;&#x2F;首先在store中声明两个mutations\n      mutations:&#123;\n&#x2F;&#x2F;increase可以再添加一个参数来控制数值改变的大小；\n        increase(state)&#123;\n          state.count+&#x3D;1;\n        &#125;,\n        decrease(state)&#123;\n          state.count-&#x3D;1;\n        &#125;\n      &#125;\n&#125;);\n\n\n&lt;template&gt;\n    &lt;div&gt;\n        &lt;button @click&#x3D;&quot;handleIncrease&quot;&gt;+1&lt;&#x2F;button&gt;\n          &#123;&#123; count &#125;&#125;\n        &lt;button @click&#x3D;&quot;handleDecrease&quot;&gt;-1&lt;&#x2F;button&gt;  \n    &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport Button from &#39;.&#x2F;Button.vue&#39;;\nexport default &#123;\n  components: &#123; Button &#125;,\n    name:&#39;Counter&#39;,\n    computed:&#123;\n        count()&#123;\n            return this.$store.state.count;\n        &#125;\n    &#125;,\n    &#x2F;&#x2F;使用methods方法来调用mutations实现数据修改；\n    methods:&#123;\n        handleIncrease:function()&#123;\n            this.$store.commit(&#39;increase&#39;);\n        &#125;,\n        handleDecrease:function()&#123;\n            this.$store.commit(&#39;decrease&#39;);\n        &#125;\n    &#125;\n&#125;\n&lt;&#x2F;script&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ES6小语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//函数的参数可以设定默认值，当没有传入参数使用默认参数;一个参数不够时，可以传入一个对象，无限扩展；</span>\nincrease（state，n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    n<span class=\"token operator\">=</span>n <span class=\"token operator\">||</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>4.高级用法</p>\n","text":"Ch11 插件 一、插件得创建和使用 //公开的方法install，参数1：VUe构造器，参数2：可选对象 MyPlugin.install=function(Vue,options)&#123; //全剧注册组件 Vue.component('component-name',&...","link":"","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"VUE","slug":"VUE","count":17,"path":"api/tags/VUE.json"},{"name":"Vue.js实战","slug":"Vue-js实战","count":11,"path":"api/tags/Vue-js实战.json"}],"toc":"","author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Javascript高级程序设计（6）","uid":"95751cb221a8005beae2f8c8f2c4082e","slug":"Javascript高级程序设计（6）","date":"2021-01-12T13:18:45.000Z","updated":"2021-01-26T12:12:56.000Z","comments":true,"path":"api/articles/Javascript高级程序设计（6）.json","keywords":"Love And Freedom","cover":"img/bg1.jpg","text":"CH66.1 对象//eailer var person=new Object(); person.name=\"Martin\"; person.age=18; person.job=\"Student\"; person.sayName=function()&#123; alert(...","link":"","photos":[],"count_time":{"symbolsCount":"3.2k","symbolsTime":"3 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"Javascript","slug":"Javascript","count":1,"path":"api/tags/Javascript.json"},{"name":"Javascript高级程序设计","slug":"Javascript高级程序设计","count":1,"path":"api/tags/Javascript高级程序设计.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"CSS笔记","uid":"db49ff597c4220005ea1e51dd4896898","slug":"CSS特性","date":"2020-12-03T13:18:45.000Z","updated":"2020-12-03T11:56:24.000Z","comments":true,"path":"api/articles/CSS特性.json","keywords":"Love And Freedom","cover":"img/welcome-cover2.jpg","text":"1.向 div 元素添加阴影 box-shadow: 20px 10px 5px pink; 参数：长 宽 颜色 2.display none 此元素不会被显示。 block 此元素将显示为块级元素，此元素前后会带有换行符。 inline 默认。此元素会被显示为内联元素，元素前后...","link":"","photos":[],"count_time":{"symbolsCount":476,"symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"VUE","slug":"VUE","count":17,"path":"api/tags/VUE.json"},{"name":"Vue.js实战","slug":"Vue-js实战","count":11,"path":"api/tags/Vue-js实战.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}