{"title":"Web开发安全","uid":"7867a2828e93baed8fd4a0d08eec51d1","slug":"web开发安全","date":"2023-03-27T10:51:45.000Z","updated":"2023-03-27T11:01:31.701Z","comments":true,"path":"api/articles/web开发安全.json","keywords":"Love And Freedom","cover":"img/bg1.jpg","content":"<h1 id=\"Web开发安全\"><a href=\"#Web开发安全\" class=\"headerlink\" title=\"Web开发安全\"></a>Web开发安全</h1><h1 id=\"攻击篇\"><a href=\"#攻击篇\" class=\"headerlink\" title=\"攻击篇\"></a>攻击篇</h1><h2 id=\"一、Cross-site-Scripting-XSS-跨站脚本攻击\"><a href=\"#一、Cross-site-Scripting-XSS-跨站脚本攻击\" class=\"headerlink\" title=\"一、Cross-site Scripting(XSS)跨站脚本攻击\"></a>一、Cross-site Scripting(XSS)跨站脚本攻击</h2><h3 id=\"1-主要利用点\"><a href=\"#1-主要利用点\" class=\"headerlink\" title=\"1.主要利用点\"></a>1.主要利用点</h3><ul>\n<li>盲目信任用户的提交内容；</li>\n<li>string-&gt;Dom</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">doucument<span class=\"token punctuation\">.</span>write\nelement<span class=\"token punctuation\">.</span>innerHTML<span class=\"token operator\">=</span>anyString\n<span class=\"token constant\">SSR</span><span class=\"token punctuation\">(</span>user_data<span class=\"token punctuation\">)</span>\t<span class=\"token comment\">//伪代码</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"2-特点\"><a href=\"#2-特点\" class=\"headerlink\" title=\"2.特点\"></a>2.特点</h3><ul>\n<li>很难从UI感知；</li>\n<li>窃取用户信息（Cookie/token）；</li>\n<li>绘制UI（例如弹窗），诱骗用户点击/填写表单；</li>\n</ul>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/bab761782d523687.jpg\"></p>\n<h3 id=\"3-类别\"><a href=\"#3-类别\" class=\"headerlink\" title=\"3.类别\"></a>3.类别</h3><ul>\n<li>stored XSS（存储型xss）</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-恶意脚本被存储在数据库中\n-访问页面-&gt;读数据-&gt;被攻击\n-危害最大，对全部用户可见<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<ul>\n<li>reflected XSS (反射型xss)</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-不涉及数据库\n-从URL攻击<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/01aa21181b743218.jpg\"></p>\n<ul>\n<li>DOM-based XSS</li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-不需要服务器参与\n-恶意攻击的发起+执行，全部在浏览器完成<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/8f74704368f2a414.jpg\"></p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/83dda8008e3c1b19.jpg\"></p>\n<ul>\n<li>Mutation-based XSS </li>\n</ul>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">-利用浏览器渲染DOM的特性（独特优化）\n-不同的浏览器，会有区别（按照浏览器进行攻击）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/2db16e9e30d05689.jpg\"></p>\n<p>Note：其实就是闭合双引号；</p>\n<h2 id=\"二、Cross-site-request-forgery-CSRF-跨站伪造请求\"><a href=\"#二、Cross-site-request-forgery-CSRF-跨站伪造请求\" class=\"headerlink\" title=\"二、Cross-site request forgery(CSRF)跨站伪造请求\"></a>二、Cross-site request forgery(CSRF)跨站伪造请求</h2><h3 id=\"1-特点\"><a href=\"#1-特点\" class=\"headerlink\" title=\"1.特点\"></a>1.特点</h3><ul>\n<li>在用户不知情的前提下</li>\n<li>利用用户权限Cookie</li>\n<li>构造指定HTTP请求，窃取或者修改用户敏感信息</li>\n</ul>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/1cb69b1cdfc1f80f.jpg\"></p>\n<h3 id=\"2-Get请求\"><a href=\"#2-Get请求\" class=\"headerlink\" title=\"2.Get请求\"></a>2.Get请求</h3><p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/315569b1ad5267c7.jpg\"></p>\n<h2 id=\"三、注入\"><a href=\"#三、注入\" class=\"headerlink\" title=\"三、注入\"></a>三、注入</h2><h3 id=\"1-SQL-Injection\"><a href=\"#1-SQL-Injection\" class=\"headerlink\" title=\"1.SQL Injection\"></a>1.SQL Injection</h3><p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/bdfe27a1758bff45.jpg\"></p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/d8d8412ddb795269.png\"> </p>\n<h3 id=\"2-更多注入\"><a href=\"#2-更多注入\" class=\"headerlink\" title=\"2.更多注入\"></a>2.更多注入</h3><ul>\n<li>CLI</li>\n<li>OS command</li>\n<li>Server-side Request Forgery(SSRF),服务端伪造请求；严格来说并不是注入，但是原理类似；</li>\n</ul>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/c853331fa801b755.jpg\"></p>\n<h5 id=\"读取-修改\"><a href=\"#读取-修改\" class=\"headerlink\" title=\"读取+修改\"></a>读取+修改</h5><p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/d326f66d918f6e14.jpg\"></p>\n<p>SSRF Demo</p>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/730fd31cf9f769ca.jpg\"></p>\n<h2 id=\"四、DOS\"><a href=\"#四、DOS\" class=\"headerlink\" title=\"四、DOS\"></a>四、DOS</h2><blockquote>\n<p>通过某种方式（构造特定请求），导致服务器资源被消耗殆尽，来不及响应更多请求，导致请求被挤压，进而形成雪崩效应；</p>\n</blockquote>\n<h3 id=\"1-正则表达式——贪婪模式\"><a href=\"#1-正则表达式——贪婪模式\" class=\"headerlink\" title=\"1.正则表达式——贪婪模式\"></a>1.正则表达式——贪婪模式</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> greedyRegExp<span class=\"token operator\">=</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a+</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> noGreedyRegExp<span class=\"token operator\">=</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">a+?</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> str<span class=\"token operator\">=</span><span class=\"token string\">'aaaaaaa'</span><span class=\"token punctuation\">;</span>\n\nresult1<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>greedyRegExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\">// \"aaaaaaa\"</span>\nresult2<span class=\"token operator\">=</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>noGreedyRegExp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">// \"a\"</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"2-ReDOS-基于正则表达式的DoS\"><a href=\"#2-ReDOS-基于正则表达式的DoS\" class=\"headerlink\" title=\"2.ReDOS 基于正则表达式的DoS\"></a>2.ReDOS 基于正则表达式的DoS</h3><p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/c28283945d9c0451.jpg\"></p>\n<h3 id=\"3-DDos\"><a href=\"#3-DDos\" class=\"headerlink\" title=\"3.DDos\"></a>3.DDos</h3><blockquote>\n<p>短时间内，来自大量僵尸设备的请求流量，服务器不能及时完成全部请求，导致请求堆积；</p>\n</blockquote>\n<h5 id=\"Logical-DOS\"><a href=\"#Logical-DOS\" class=\"headerlink\" title=\"Logical DOS\"></a>Logical DOS</h5><ul>\n<li>耗时的同步操作</li>\n<li>数据库写入</li>\n<li>SQL join</li>\n<li>文件备份</li>\n<li>循环执行逻辑</li>\n</ul>\n<p><img src=\"https://s3.bmp.ovh/imgs/2023/02/06/bade294c53a9fd51.jpg\"></p>\n<h2 id=\"五、中间人攻击\"><a href=\"#五、中间人攻击\" class=\"headerlink\" title=\"五、中间人攻击\"></a>五、中间人攻击</h2><p><img src=\"https://pic.imgdb.cn/item/63e069224757feff33a5d839.jpg\"></p>\n<h1 id=\"防御篇\"><a href=\"#防御篇\" class=\"headerlink\" title=\"防御篇\"></a>防御篇</h1><h2 id=\"一、XSS\"><a href=\"#一、XSS\" class=\"headerlink\" title=\"一、XSS\"></a>一、XSS</h2><h3 id=\"1-防御方法\"><a href=\"#1-防御方法\" class=\"headerlink\" title=\"1.防御方法\"></a>1.防御方法</h3><h5 id=\"原则\"><a href=\"#原则\" class=\"headerlink\" title=\"原则\"></a>原则</h5><ul>\n<li>永远不要相信用户的提交内容</li>\n<li>永远不要将用户提交的内容转换为DOM</li>\n</ul>\n<h5 id=\"前端\"><a href=\"#前端\" class=\"headerlink\" title=\"前端\"></a>前端</h5><ul>\n<li>主流框架默认防御XSS</li>\n<li>googole-closure-library</li>\n</ul>\n<h5 id=\"服务端（Node）\"><a href=\"#服务端（Node）\" class=\"headerlink\" title=\"服务端（Node）\"></a>服务端（Node）</h5><ul>\n<li>DOMPurify</li>\n</ul>\n<h5 id=\"业务需要用户生成DOM\"><a href=\"#业务需要用户生成DOM\" class=\"headerlink\" title=\"业务需要用户生成DOM\"></a>业务需要用户生成DOM</h5><ul>\n<li>需要对string进行转义</li>\n<li>上传的svg文件需要进行扫描</li>\n<li>Blob动态生成script</li>\n<li>自定义样式（自定义背景图片，url）</li>\n</ul>\n<h3 id=\"2-同源策略\"><a href=\"#2-同源策略\" class=\"headerlink\" title=\"2.同源策略\"></a>2.同源策略</h3><ul>\n<li>协议、域名、端口号完全相同；</li>\n</ul>\n<h3 id=\"3-CSP（content-security-policy）\"><a href=\"#3-CSP（content-security-policy）\" class=\"headerlink\" title=\"3.CSP（content security policy）\"></a>3.CSP（content security policy）</h3><ul>\n<li>那些源认为是安全的</li>\n<li>对来自安全源的脚本可以执行，否则直接抛错</li>\n<li>对eval+inline script 说No！！！！</li>\n</ul>\n<p><img src=\"https://pic.imgdb.cn/item/63e06b684757feff33a91d70.jpg\"></p>\n<h2 id=\"二、CSRF\"><a href=\"#二、CSRF\" class=\"headerlink\" title=\"二、CSRF\"></a>二、CSRF</h2><p><img src=\"https://pic.imgdb.cn/item/63e06ba14757feff33a96e53.jpg\"></p>\n<h5 id=\"token\"><a href=\"#token\" class=\"headerlink\" title=\"token\"></a>token</h5><p><img src=\"https://pic.imgdb.cn/item/63e06bed4757feff33a9e138.jpg\"></p>\n<h5 id=\"iFrame攻击\"><a href=\"#iFrame攻击\" class=\"headerlink\" title=\"iFrame攻击\"></a>iFrame攻击</h5><p><img src=\"https://pic.imgdb.cn/item/63e06cac4757feff33aaec65.jpg\"></p>\n<blockquote>\n<p>button是none的，所以点击button下穿到了底下的iframe页面；</p>\n</blockquote>\n<h5 id=\"anti-pattern\"><a href=\"#anti-pattern\" class=\"headerlink\" title=\"anti-pattern\"></a>anti-pattern</h5><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//GET!==GET+POST</span>\n<span class=\"token comment\">//将更新+获取放到同一个GET接口；</span>\npulic <span class=\"token keyword\">async</span> <span class=\"token function\">getAndUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span><span class=\"token punctuation\">&#123;</span>update<span class=\"token punctuation\">,</span>id<span class=\"token punctuation\">&#125;</span><span class=\"token operator\">=</span>ctx<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    ctx<span class=\"token punctuation\">.</span>body<span class=\"token operator\">=</span><span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h5 id=\"避免用户信息被携带：same-site-cookie\"><a href=\"#避免用户信息被携带：same-site-cookie\" class=\"headerlink\" title=\"避免用户信息被携带：same site cookie\"></a>避免用户信息被携带：same site cookie</h5><p><img src=\"https://pic.imgdb.cn/item/63e06e0e4757feff33ad8660.jpg\"></p>\n<p><img src=\"https://pic.imgdb.cn/item/63e06e224757feff33adb6f3.jpg\"></p>\n<h5 id=\"问题：第三方服务依赖于cookie怎么办？\"><a href=\"#问题：第三方服务依赖于cookie怎么办？\" class=\"headerlink\" title=\"问题：第三方服务依赖于cookie怎么办？\"></a>问题：第三方服务依赖于cookie怎么办？</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">Set-Cookie:SameSite&#x3D;None;Secure;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"https://pic.imgdb.cn/item/63e06eb34757feff33aec45d.jpg\"></p>\n<h2 id=\"三、Injection\"><a href=\"#三、Injection\" class=\"headerlink\" title=\"三、Injection\"></a>三、Injection</h2><ul>\n<li>找到查询SQL的地方</li>\n<li>使用prapared statement</li>\n<li>最小权限原则：禁止sudo || root</li>\n<li>建立允许名单+过滤：禁止rm</li>\n<li>对URL类型参数进行协议、域名、ip等限制：禁止访问内网</li>\n</ul>\n<h2 id=\"四、DOS-1\"><a href=\"#四、DOS-1\" class=\"headerlink\" title=\"四、DOS\"></a>四、DOS</h2><h3 id=\"1-RegexDos\"><a href=\"#1-RegexDos\" class=\"headerlink\" title=\"1.RegexDos\"></a>1.RegexDos</h3><ul>\n<li>code review</li>\n<li>code scan+正则性能测试</li>\n<li>禁止使用用户提供的正则</li>\n</ul>\n<h3 id=\"2-DDoS\"><a href=\"#2-DDoS\" class=\"headerlink\" title=\"2.DDoS\"></a>2.DDoS</h3><ul>\n<li>流量治理：负载均衡、API网关、CDN （过滤）</li>\n<li>快速自动扩容        (抗量)</li>\n<li>非核心服务降级  （抗量）</li>\n</ul>\n<h3 id=\"3-中间人\"><a href=\"#3-中间人\" class=\"headerlink\" title=\"3.中间人\"></a>3.中间人</h3><p><img src=\"https://pic.imgdb.cn/item/63e070324757feff33b1206f.jpg\"></p>\n<ul>\n<li>可靠：加密</li>\n<li>完整：MAC校验</li>\n<li>不可抵赖：数字签名</li>\n</ul>\n<h3 id=\"4-SRI-子资源集成\"><a href=\"#4-SRI-子资源集成\" class=\"headerlink\" title=\"4.SRI  子资源集成\"></a>4.SRI  子资源集成</h3><p>静态资源被劫持篡改？</p>\n<p>对比Hash !!!</p>\n<p><img src=\"https://pic.imgdb.cn/item/63e071574757feff33b2d91a.jpg\"></p>\n","text":"Web开发安全攻击篇一、Cross-site Scripting(XSS)跨站脚本攻击1.主要利用点 盲目信任用户的提交内容； string-&gt;Dom doucument.write element.innerHTML=anyString SSR(user_data) //...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"网络安全","slug":"网络安全","count":1,"path":"api/tags/网络安全.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Web%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8\"><span class=\"toc-text\">Web开发安全</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%94%BB%E5%87%BB%E7%AF%87\"><span class=\"toc-text\">攻击篇</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81Cross-site-Scripting-XSS-%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB\"><span class=\"toc-text\">一、Cross-site Scripting(XSS)跨站脚本攻击</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E4%B8%BB%E8%A6%81%E5%88%A9%E7%94%A8%E7%82%B9\"><span class=\"toc-text\">1.主要利用点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">2.特点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E7%B1%BB%E5%88%AB\"><span class=\"toc-text\">3.类别</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81Cross-site-request-forgery-CSRF-%E8%B7%A8%E7%AB%99%E4%BC%AA%E9%80%A0%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">二、Cross-site request forgery(CSRF)跨站伪造请求</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">1.特点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-Get%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">2.Get请求</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">三、注入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-SQL-Injection\"><span class=\"toc-text\">1.SQL Injection</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E6%9B%B4%E5%A4%9A%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">2.更多注入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E8%AF%BB%E5%8F%96-%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">读取+修改</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81DOS\"><span class=\"toc-text\">四、DOS</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E2%80%94%E2%80%94%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F\"><span class=\"toc-text\">1.正则表达式——贪婪模式</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-ReDOS-%E5%9F%BA%E4%BA%8E%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84DoS\"><span class=\"toc-text\">2.ReDOS 基于正则表达式的DoS</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-DDos\"><span class=\"toc-text\">3.DDos</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#Logical-DOS\"><span class=\"toc-text\">Logical DOS</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB\"><span class=\"toc-text\">五、中间人攻击</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%98%B2%E5%BE%A1%E7%AF%87\"><span class=\"toc-text\">防御篇</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81XSS\"><span class=\"toc-text\">一、XSS</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">1.防御方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E5%88%99\"><span class=\"toc-text\">原则</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E5%89%8D%E7%AB%AF\"><span class=\"toc-text\">前端</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%88Node%EF%BC%89\"><span class=\"toc-text\">服务端（Node）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%B8%9A%E5%8A%A1%E9%9C%80%E8%A6%81%E7%94%A8%E6%88%B7%E7%94%9F%E6%88%90DOM\"><span class=\"toc-text\">业务需要用户生成DOM</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5\"><span class=\"toc-text\">2.同源策略</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-CSP%EF%BC%88content-security-policy%EF%BC%89\"><span class=\"toc-text\">3.CSP（content security policy）</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81CSRF\"><span class=\"toc-text\">二、CSRF</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#token\"><span class=\"toc-text\">token</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#iFrame%E6%94%BB%E5%87%BB\"><span class=\"toc-text\">iFrame攻击</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#anti-pattern\"><span class=\"toc-text\">anti-pattern</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%81%BF%E5%85%8D%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E8%A2%AB%E6%90%BA%E5%B8%A6%EF%BC%9Asame-site-cookie\"><span class=\"toc-text\">避免用户信息被携带：same site cookie</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%EF%BC%9A%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E4%BE%9D%E8%B5%96%E4%BA%8Ecookie%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F\"><span class=\"toc-text\">问题：第三方服务依赖于cookie怎么办？</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81Injection\"><span class=\"toc-text\">三、Injection</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81DOS-1\"><span class=\"toc-text\">四、DOS</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-RegexDos\"><span class=\"toc-text\">1.RegexDos</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-DDoS\"><span class=\"toc-text\">2.DDoS</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E4%B8%AD%E9%97%B4%E4%BA%BA\"><span class=\"toc-text\">3.中间人</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-SRI-%E5%AD%90%E8%B5%84%E6%BA%90%E9%9B%86%E6%88%90\"><span class=\"toc-text\">4.SRI  子资源集成</span></a></li></ol></li></ol></li></ol>","author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"WebGL","uid":"52c50e0cffff29ad32e5e64ba6840c70","slug":"WebGL月影带练","date":"2023-03-27T10:51:45.000Z","updated":"2023-03-27T11:01:29.588Z","comments":true,"path":"api/articles/WebGL月影带练.json","keywords":"Love And Freedom","cover":"img/bg2.jpg","text":"WebGL一、Why WebGL？Why GPU？GPU!&#x3D;WebGL!&#x3D;3D 1.现代图形系统 光栅（Raster）：几乎所有的现代图形系统都是基于光栅来绘制图形的，光栅就是指构成图像的像素阵列； 像素：一个像素对应图像的一个带你，通常保存图像的某个具体位置...","link":"","photos":[],"count_time":{"symbolsCount":576,"symbolsTime":"1 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"可视化","slug":"可视化","count":2,"path":"api/tags/可视化.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"前端开发调试","uid":"758ca3435563534b448be7a72bef9969","slug":"前端开发调试","date":"2023-03-27T10:51:45.000Z","updated":"2023-03-27T11:06:48.816Z","comments":true,"path":"api/articles/前端开发调试.json","keywords":"Love And Freedom","cover":"img/bg14.jpg","text":"前端开发调试 No code，no bug 一、Bug 与 Debug1.前端Debug的特点 多平台（浏览器、NodeJS、） 多环境（本地开发环境，线上环境） 多工具（Chrome Devtools、Charles、） 多技巧（Console、Breakpoint、sourc...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"前端","slug":"前端","count":37,"path":"api/categories/前端.json"}],"tags":[{"name":"笔记","slug":"笔记","count":39,"path":"api/tags/笔记.json"},{"name":"面试笔记","slug":"面试笔记","count":4,"path":"api/tags/面试笔记.json"}],"author":{"name":"Martin","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Be Myself","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}